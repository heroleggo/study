# 2023-04-05

### 학습 내용 정리

#### 컨테이너 사용시 주의해야 하는 점

모든 컨테이너는 리눅스 커널을 기반으로 구동

-> 컨테이너가 특정 버전의 커널을 필요로 한다면 해당 버전이 아닌 다른 호스트에서 컨테이너가 동작하지 않을 수 있음

컨테이너는 하드웨어에 의존

-> x86 아키텍처 용으로 만들어진 이미지를 arm 아키텍처 기반 컴퓨터에서 실행할 수 없다

#### rkt

rkt도 docker와 유사한 컨테이너 플랫폼

docker는 성공 후 업계 표준 작성을 위해 OCI(open container initiative)를 만들어 표준 관리

rkt도 OCI 표준을 준수하는 컨테이너 플랫폼

쿠버네티스는 OCI 표준을 준수하는 컨테이너를 오케스트레이션하기 때문에, docker 기반 뿐만 아니라 rkt 기반으로 동작할 수 있음

#### 쿠버네티스의 시작

최초 쿠버네티스는 구글에서 만들어 오픈소스 형태로 공유

내부에서 활용하던 Borg, Omega를 기반으로 하여 수천개의 애플리케이션/서비스를 관리할 수 있는 시스템을 내놓음

#### 쿠버네티스 구성

쿠버네티스를 통해 여러 대의 컴퓨터를 묶어 한 대의 컴퓨터가 동작하는 것 처럼 구성

마스터 노드, 워커 노드로 구분

마스터 노드 : 사용자에게 애플리케이션 정보를 받아 워커 노드에 배포

워커 노드 : 애플리케이션이 직접 실행되는 노드

#### 쿠버네티스 아키텍처

**control plane (master node)**
- etcd : 클러스터의 구성을 저장하는 분산 데이터 저장소
- API server : 사용자 - control plane 간 통신
- scheduler : 애플리케이션의 배포 담당
- controller manager : 구성 요소 복제본, 워커 노드 추적, 노드 장애 처리 수행

**worker node**
- kubelet : API 서버와 통신, 노드의 컨테이너 관리
- kube-proxy : 애플리케이션 구성 요소 간 네트워크 트래픽 로드밸런싱
- container runtime : 실제 컨테이너가 실행되는 docker, rkt 등의 컨테이너 런타임

#### 쿠버네티스 실행 흐름

> 컨테이너 이미지 -> 레지스트리 -> 쿠버 API 호출을 통한 애플리케이션 description

description에 포함되는 것

- 어떤 이미지인지
- 구성 요소의 통신방법
- 동일한 이미지의 복제본 수
- IP 등록을 통한 컨테이너간 검색 가능 요소 등